const R={},M=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),S=t=>{if(!t)return"-";const n=t.split("T")[0],[e,o,r]=n.split("-");return`${r}/${o}/${e}`},x=t=>{if(!t)return"";const n=t.match(/^(\d{4})-(\d{2})(?:-\d{2})?$/);if(!n)return t;const e=n[1],o=Number(n[2])-1,r=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"];return Number.isNaN(o)||o<0||o>11?t:`${r[o]}/${e}`},w=()=>{const t=R?.VITE_PUBLIC_SITE_URL||R?.VITE_SITE_URL||"",n=typeof window<"u"?window.location.origin:"",e=(t||n||"").trim();return e?e.replace(/\/+$/,""):""},F=t=>{const n=w();if(!n)return"";const e=t.startsWith("/")?t:`/${t}`;return`${n}${e}`},_=(t,n,e,o)=>{const r=`${t}-${n}-${e}-${o}`;let s=0;for(let c=0;c<r.length;c++){const h=r.charCodeAt(c);s=(s<<5)-s+h,s=s&s}return Math.abs(s).toString(16)},U=t=>{const n=[];if(!t)return n;const e=t.replace(/\r\n/g,`
`),o=/<STMTTRN>/gi,r=[];let s;for(;(s=o.exec(e))!==null;)r.push({start:s.index,len:s[0].length});if(!r.length)return n;const c=(i,a)=>{const l=new RegExp(`<${a}>([^<\\r\\n]*)`,"i"),m=i.match(l);return m?m[1].trim():""},h=i=>{const a=i.trim();return a?a.includes(",")&&a.includes(".")?parseFloat(a.replace(/\./g,"").replace(",",".")):parseFloat(a.replace(",",".")):NaN};return r.forEach((i,a)=>{const l=i.start+i.len,m=r[a+1]?.start??e.length,$=e.slice(l,m).search(/<\/STMTTRN>/i),E=$>=0?l+$:m,u=e.slice(l,E),d=c(u,"DTPOSTED").match(/\d{8}/)?.[0]||"";if(!d)return;const g=`${d.substring(0,4)}-${d.substring(4,6)}-${d.substring(6,8)}`,N=c(u,"TRNAMT"),T=h(N);if(!Number.isFinite(T))return;const D=c(u,"FITID"),f=c(u,"MEMO")||c(u,"NAME")||"Sem descrição",p=c(u,"TRNTYPE").toUpperCase(),I=p==="DEBIT"||p==="CREDIT"?p:T<0?"DEBIT":"CREDIT",b=D||`${d}-${T}-${f}`;n.push({fitid:b,date:g,amount:T,description:f,type:I,hash:_(g,T,f,b)})}),n};export{x as a,S as b,F as c,M as f,U as p};
